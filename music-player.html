<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Wavelength — Music Player</title>
<link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<style>
  :root {
    --bg: #0a0a0f;
    --sidebar-bg: #111117;
    --card-bg: #16161e;
    --hover-bg: #1e1e2a;
    --accent: #1db954;
    --accent-glow: rgba(29,185,84,0.25);
    --text-primary: #ffffff;
    --text-secondary: #a0a0b8;
    --text-muted: #5a5a78;
    --border: rgba(255,255,255,0.07);
    --player-bg: #0d0d14;
    --progress-bg: #2a2a3a;
  }
  * { margin:0; padding:0; box-sizing:border-box; }
  body {
    font-family: 'DM Sans', sans-serif;
    background: var(--bg);
    color: var(--text-primary);
    height: 100vh;
    display: flex;
    flex-direction: column;
    overflow: hidden;
    user-select: none;
  }
  .app {
    display: grid;
    grid-template-columns: 260px 1fr;
    grid-template-rows: 1fr 90px;
    height: 100vh;
    gap: 8px;
    padding: 8px 8px 0;
  }
  /* SIDEBAR */
  .sidebar {
    background: var(--sidebar-bg);
    border-radius: 12px;
    padding: 24px 16px;
    grid-row: 1;
    display: flex;
    flex-direction: column;
    gap: 28px;
    overflow: hidden;
  }
  .logo {
    display: flex; align-items: center; gap: 10px; padding: 0 8px;
  }
  .logo-icon {
    width: 36px; height: 36px;
    background: var(--accent);
    border-radius: 50%;
    display: flex; align-items: center; justify-content: center;
    box-shadow: 0 0 20px var(--accent-glow);
    flex-shrink: 0;
  }
  .logo-icon svg { width: 18px; height: 18px; fill: #000; }
  .logo-text { font-size: 17px; font-weight: 700; letter-spacing: -0.5px; }
  .nav { display: flex; flex-direction: column; gap: 4px; }
  .nav-item {
    display: flex; align-items: center; gap: 14px;
    padding: 10px 12px; border-radius: 8px; cursor: pointer;
    color: var(--text-secondary); font-size: 14px; font-weight: 500;
    transition: all 0.15s;
  }
  .nav-item:hover { background: var(--hover-bg); color: var(--text-primary); }
  .nav-item.active { color: var(--text-primary); }
  .nav-item svg { width: 20px; height: 20px; flex-shrink: 0; }
  .sidebar-section {
    flex: 1; display: flex; flex-direction: column; overflow: hidden; min-height: 0;
  }
  .sidebar-section-header {
    display: flex; justify-content: space-between; align-items: center;
    padding: 8px 12px; color: var(--text-muted);
    font-size: 11px; font-weight: 700; letter-spacing: 0.1em; text-transform: uppercase;
    margin-bottom: 6px;
  }
  .add-btn {
    width: 24px; height: 24px; background: none; border: none; cursor: pointer;
    color: var(--text-muted); display: flex; align-items: center; justify-content: center;
    border-radius: 50%; transition: all 0.15s;
  }
  .add-btn:hover { color: var(--text-primary); background: var(--hover-bg); }
  .add-btn svg { width: 16px; height: 16px; }
  .playlist {
    flex: 1; overflow-y: auto; display: flex; flex-direction: column; gap: 2px;
  }
  .playlist::-webkit-scrollbar { width: 4px; }
  .playlist::-webkit-scrollbar-thumb { background: var(--border); border-radius: 2px; }
  .playlist-item {
    display: flex; align-items: center; gap: 10px;
    padding: 8px 12px; border-radius: 8px; cursor: pointer; transition: background 0.15s;
  }
  .playlist-item:hover { background: var(--hover-bg); }
  .playlist-item.active { background: var(--hover-bg); }
  .playlist-item.active .pi-name { color: var(--accent); }
  .pi-num {
    width: 18px; text-align: center; font-size: 13px;
    color: var(--text-muted); flex-shrink: 0;
  }
  .playlist-item.active .pi-num { display: none; }
  .pi-bars { display: none; width: 18px; flex-shrink: 0; align-items: center; justify-content: center; }
  .playlist-item.active .pi-bars { display: flex; }
  .bars { display: flex; align-items: flex-end; gap: 2px; height: 14px; }
  .bars span { width: 3px; background: var(--accent); border-radius: 2px; animation: b 0.8s ease infinite; }
  .bars span:nth-child(2) { animation-delay: 0.2s; }
  .bars span:nth-child(3) { animation-delay: 0.4s; }
  @keyframes b { 0%,100% { height: 4px; } 50% { height: 14px; } }
  .pi-art {
    width: 36px; height: 36px; border-radius: 6px; background: var(--card-bg);
    flex-shrink: 0; display: flex; align-items: center; justify-content: center; overflow: hidden;
  }
  .pi-art svg { width: 14px; height: 14px; color: var(--text-muted); }
  .pi-info { flex: 1; min-width: 0; }
  .pi-name { font-size: 13px; font-weight: 500; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
  .pi-artist { font-size: 12px; color: var(--text-muted); margin-top: 1px; }
  .pi-dur { font-size: 12px; color: var(--text-muted); flex-shrink: 0; }
  /* MAIN */
  .main {
    background: var(--sidebar-bg); border-radius: 12px;
    display: flex; flex-direction: column; overflow: hidden;
  }
  .main-top {
    padding: 28px 32px 0;
    display: flex; justify-content: space-between; align-items: flex-start;
    flex-shrink: 0;
  }
  .main-top h1 { font-size: 28px; font-weight: 700; letter-spacing: -0.5px; }
  .main-top p { font-size: 14px; color: var(--text-secondary); margin-top: 4px; }
  .upload-zone {
    margin: 20px 32px 0; flex-shrink: 0;
    border: 2px dashed var(--border); border-radius: 12px;
    padding: 24px 32px; text-align: center; cursor: pointer; transition: all 0.2s;
    background: rgba(29,185,84,0.02);
  }
  .upload-zone:hover, .upload-zone.drag { border-color: var(--accent); background: rgba(29,185,84,0.05); }
  .upload-zone svg { width: 36px; height: 36px; color: var(--accent); margin: 0 auto 10px; display: block; }
  .upload-zone h3 { font-size: 15px; font-weight: 600; margin-bottom: 4px; }
  .upload-zone p { font-size: 13px; color: var(--text-secondary); }
  .upload-zone .lnk { color: var(--accent); font-weight: 600; cursor: pointer; }
  #fi { display: none; }
  .tracks-hdr {
    display: grid; grid-template-columns: 48px 1fr 120px 80px;
    padding: 12px 32px 8px; border-bottom: 1px solid var(--border);
    flex-shrink: 0; margin-top: 16px;
  }
  .tracks-hdr span {
    font-size: 11px; font-weight: 700; color: var(--text-muted);
    text-transform: uppercase; letter-spacing: 0.08em;
  }
  .tracks-hdr span:last-child { text-align: right; }
  .tracks-list {
    flex: 1; overflow-y: auto; padding: 4px 20px 16px;
  }
  .tracks-list::-webkit-scrollbar { width: 6px; }
  .tracks-list::-webkit-scrollbar-thumb { background: var(--border); border-radius: 3px; }
  .tr {
    display: grid; grid-template-columns: 48px 1fr 120px 80px;
    align-items: center; padding: 8px 12px;
    border-radius: 8px; cursor: pointer; transition: background 0.15s;
  }
  .tr:hover { background: var(--hover-bg); }
  .tr.active { background: var(--hover-bg); }
  .tr-num { font-size: 14px; color: var(--text-muted); text-align: center; }
  .tr.active .tr-num { display: none; }
  .tr-bars { display: none; align-items: center; justify-content: center; }
  .tr.active .tr-bars { display: flex; }
  .tr-info { display: flex; align-items: center; gap: 14px; min-width: 0; }
  .tr-art {
    width: 44px; height: 44px; border-radius: 8px; background: var(--card-bg);
    flex-shrink: 0; display: flex; align-items: center; justify-content: center; overflow: hidden;
  }
  .tr-art svg { width: 18px; height: 18px; color: var(--text-muted); }
  .tr-text h4 { font-size: 14px; font-weight: 500; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width: 280px; }
  .tr.active .tr-text h4 { color: var(--accent); }
  .tr-text span { font-size: 13px; color: var(--text-secondary); }
  .tr-date { font-size: 13px; color: var(--text-muted); }
  .tr-dur { font-size: 13px; color: var(--text-muted); text-align: right; padding-right: 4px; }
  .empty {
    display: flex; flex-direction: column; align-items: center; justify-content: center;
    flex: 1; color: var(--text-muted); gap: 10px; padding-bottom: 40px;
  }
  .empty svg { width: 52px; height: 52px; opacity: 0.2; }
  .empty p { font-size: 14px; }
  /* PLAYER */
  .player {
    grid-column: 1 / -1; background: var(--player-bg); border-top: 1px solid var(--border);
    display: grid; grid-template-columns: 1fr 2fr 1fr;
    align-items: center; padding: 0 24px; height: 90px; gap: 16px;
  }
  .p-track { display: flex; align-items: center; gap: 14px; }
  .p-art {
    width: 56px; height: 56px; border-radius: 8px; background: var(--card-bg);
    flex-shrink: 0; display: flex; align-items: center; justify-content: center;
    box-shadow: 0 4px 20px rgba(0,0,0,0.4); overflow: hidden;
  }
  .p-art svg { width: 22px; height: 22px; color: var(--text-muted); }
  .p-info h4 { font-size: 14px; font-weight: 500; margin-bottom: 3px; max-width: 180px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
  .p-info span { font-size: 12px; color: var(--text-secondary); }
  .p-ctrl { display: flex; flex-direction: column; align-items: center; gap: 8px; }
  .ctrl-row { display: flex; align-items: center; gap: 20px; }
  .cb {
    background: none; border: none; cursor: pointer; color: var(--text-secondary);
    display: flex; align-items: center; justify-content: center;
    border-radius: 50%; padding: 6px; transition: all 0.15s;
  }
  .cb:hover { color: var(--text-primary); transform: scale(1.05); }
  .cb svg { width: 18px; height: 18px; }
  .cb.on { color: var(--accent); }
  .pb {
    width: 40px; height: 40px; background: #fff; border: none;
    border-radius: 50%; cursor: pointer; display: flex; align-items: center; justify-content: center;
    transition: all 0.15s;
  }
  .pb:hover { transform: scale(1.06); background: #e0e0e0; }
  .pb svg { width: 18px; height: 18px; fill: #000; margin-left: 2px; }
  .pb.playing svg { margin-left: 0; }
  .prog-row { display: flex; align-items: center; gap: 10px; width: 100%; }
  .tl { font-size: 11px; color: var(--text-muted); min-width: 36px; font-feature-settings: 'tnum'; }
  .tl:last-child { text-align: right; }
  .prog {
    flex: 1; height: 4px; background: var(--progress-bg);
    border-radius: 2px; cursor: pointer; position: relative;
    transition: height 0.1s;
  }
  .prog:hover { height: 6px; }
  .prog-fill {
    height: 100%; background: #fff; border-radius: 2px; pointer-events: none;
    transition: background 0.15s; position: relative;
  }
  .prog:hover .prog-fill { background: var(--accent); }
  .p-right { display: flex; align-items: center; justify-content: flex-end; gap: 12px; }
  .vol-row { display: flex; align-items: center; gap: 8px; }
  .vi {
    background: none; border: none; cursor: pointer; color: var(--text-secondary);
    display: flex; align-items: center; transition: color 0.15s;
  }
  .vi:hover { color: var(--text-primary); }
  .vi svg { width: 18px; height: 18px; }
  .vol-slider {
    width: 80px; height: 4px; background: var(--progress-bg);
    border-radius: 2px; cursor: pointer; position: relative;
    transition: height 0.1s;
  }
  .vol-slider:hover { height: 6px; }
  .vol-fill {
    height: 100%; background: var(--text-secondary);
    border-radius: 2px; pointer-events: none; transition: background 0.15s;
  }
  .vol-slider:hover .vol-fill { background: var(--accent); }
  audio { display: none; }
  @keyframes fi { from { opacity:0; transform: translateY(6px); } to { opacity:1; transform: translateY(0); } }
  .tr { animation: fi 0.2s ease; }
</style>
</head>
<body>
<audio id="aud"></audio>
<div class="app">
  <aside class="sidebar">
    <div class="logo">
      <div class="logo-icon">
        <svg viewBox="0 0 24 24"><path d="M12 3v10.55A4 4 0 1 0 14 17V7h4V3h-6z"/></svg>
      </div>
      <span class="logo-text">Wavelength</span>
    </div>
    <nav class="nav">
      <div class="nav-item active">
        <svg viewBox="0 0 24 24" fill="currentColor"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>
        Home
      </div>
      <div class="nav-item">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.35-4.35"/></svg>
        Search
      </div>
    </nav>
    <div class="sidebar-section">
      <div class="sidebar-section-header">
        Library
        <button class="add-btn" onclick="document.getElementById('fi').click()" title="Add songs">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M12 5v14M5 12h14"/></svg>
        </button>
      </div>
      <div class="playlist" id="sbar"></div>
    </div>
  </aside>

  <main class="main">
    <div class="main-top">
      <div>
        <h1>Your Library</h1>
        <p id="cnt">Upload songs to start listening</p>
      </div>
    </div>
    <div class="upload-zone" id="uz">
      <input type="file" id="fi" multiple accept="audio/*">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
        <path d="M9 19V6l12-3v13M9 19c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2zm12 0c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2z"/>
      </svg>
      <h3>Drop music here</h3>
      <p>or <span class="lnk" onclick="document.getElementById('fi').click()">browse files</span> · MP3, FLAC, WAV, AAC</p>
    </div>
    <div class="tracks-hdr" id="thdr" style="display:none">
      <span>#</span><span>Title</span><span>Added</span><span style="text-align:right">Duration</span>
    </div>
    <div class="tracks-list" id="tlist">
      <div class="empty">
        <svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 3v10.55A4 4 0 1 0 14 17V7h4V3h-6z"/></svg>
        <p>Your music will appear here</p>
      </div>
    </div>
  </main>

  <div class="player">
    <div class="p-track">
      <div class="p-art" id="part">
        <svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 3v10.55A4 4 0 1 0 14 17V7h4V3h-6z"/></svg>
      </div>
      <div class="p-info">
        <h4 id="ptitle">No track selected</h4>
        <span id="partist">—</span>
      </div>
    </div>
    <div class="p-ctrl">
      <div class="ctrl-row">
        <button class="cb" id="shuf" onclick="toggleShuffle()" title="Shuffle">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="16 3 21 3 21 8"/><line x1="4" y1="20" x2="21" y2="3"/>
            <polyline points="21 16 21 21 16 21"/><line x1="15" y1="15" x2="21" y2="21"/>
          </svg>
        </button>
        <button class="cb" onclick="prev()">
          <svg viewBox="0 0 24 24" fill="currentColor"><path d="M6 6h2v12H6zm3.5 6 8.5 6V6z"/></svg>
        </button>
        <button class="pb" id="pbtn" onclick="togglePlay()">
          <svg id="pico" viewBox="0 0 24 24"><polygon points="5,3 19,12 5,21"/></svg>
        </button>
        <button class="cb" onclick="next()">
          <svg viewBox="0 0 24 24" fill="currentColor"><path d="M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z"/></svg>
        </button>
        <button class="cb" id="rep" onclick="toggleRepeat()" title="Repeat">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="17 1 21 5 17 9"/><path d="M3 11V9a4 4 0 0 1 4-4h14"/>
            <polyline points="7 23 3 19 7 15"/><path d="M21 13v2a4 4 0 0 1-4 4H3"/>
          </svg>
        </button>
      </div>
      <div class="prog-row">
        <span class="tl" id="cur">0:00</span>
        <div class="prog" id="pbar" onclick="seek(event)">
          <div class="prog-fill" id="pfill" style="width:0%"></div>
        </div>
        <span class="tl" id="tot">0:00</span>
      </div>
    </div>
    <div class="p-right">
      <div class="vol-row">
        <button class="vi" onclick="toggleMute()">
          <svg id="vico" viewBox="0 0 24 24" fill="currentColor">
            <path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02z"/>
          </svg>
        </button>
        <div class="vol-slider" id="vs" onclick="setVol(event)">
          <div class="vol-fill" id="vf" style="width:70%"></div>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
const aud = document.getElementById('aud');
let tracks = [], ci = -1, playing = false, shuffle = false, repeat = false, muted = false, vol = 0.7;
aud.volume = vol;

const NOTESVG = `<svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 3v10.55A4 4 0 1 0 14 17V7h4V3h-6z"/></svg>`;
const BARSVG = `<div class="bars"><span></span><span></span><span></span></div>`;

document.getElementById('fi').addEventListener('change', e => { addFiles([...e.target.files]); e.target.value=''; });

const uz = document.getElementById('uz');
uz.addEventListener('dragover', e => { e.preventDefault(); uz.classList.add('drag'); });
uz.addEventListener('dragleave', () => uz.classList.remove('drag'));
uz.addEventListener('drop', e => {
  e.preventDefault(); uz.classList.remove('drag');
  addFiles([...e.dataTransfer.files].filter(f=>f.type.startsWith('audio/')));
});

function addFiles(files) {
  files.forEach(f => {
    tracks.push({ name: f.name.replace(/\.[^.]+$/,''), url: URL.createObjectURL(f), dur: '—', added: new Date() });
  });
  render();
}

function fmt(s) {
  if (!s || isNaN(s)) return '—';
  return `${Math.floor(s/60)}:${String(Math.floor(s%60)).padStart(2,'0')}`;
}

function esc(s) { return s.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;'); }

function render() {
  const tl = document.getElementById('tlist'), sb = document.getElementById('sbar');
  const hdr = document.getElementById('thdr'), cnt = document.getElementById('cnt');
  if (!tracks.length) {
    tl.innerHTML = `<div class="empty">${NOTESVG}<p>Your music will appear here</p></div>`;
    sb.innerHTML = `<div class="empty" style="padding:20px 0">${NOTESVG}<p>No songs yet</p></div>`;
    hdr.style.display='none'; cnt.textContent='Upload songs to start listening'; return;
  }
  hdr.style.display='grid';
  cnt.textContent = `${tracks.length} song${tracks.length!==1?'s':''}`;
  tl.innerHTML = tracks.map((t,i)=>`
    <div class="tr${i===ci?' active':''}" onclick="play(${i})">
      <div><div class="tr-num">${i+1}</div><div class="tr-bars">${BARSVG}</div></div>
      <div class="tr-info">
        <div class="tr-art">${NOTESVG}</div>
        <div class="tr-text"><h4>${esc(t.name)}</h4><span>Unknown Artist</span></div>
      </div>
      <div class="tr-date">${t.added.toLocaleDateString()}</div>
      <div class="tr-dur">${t.dur}</div>
    </div>`).join('');
  sb.innerHTML = tracks.map((t,i)=>`
    <div class="playlist-item${i===ci?' active':''}" onclick="play(${i})">
      <div class="pi-num">${i+1}</div>
      <div class="pi-bars">${BARSVG}</div>
      <div class="pi-art">${NOTESVG}</div>
      <div class="pi-info"><div class="pi-name">${esc(t.name)}</div><div class="pi-artist">Unknown Artist</div></div>
      <div class="pi-dur">${t.dur}</div>
    </div>`).join('');
}

function play(i) {
  if (i<0||i>=tracks.length) return;
  ci=i; aud.src=tracks[i].url; aud.play();
  document.getElementById('ptitle').textContent=tracks[i].name;
  document.getElementById('partist').textContent='Unknown Artist';
  render();
}

function togglePlay() {
  if (!tracks.length) return;
  if (ci===-1) { play(0); return; }
  if (playing) aud.pause(); else aud.play();
}

function updateBtn() {
  const btn=document.getElementById('pbtn'), ico=document.getElementById('pico');
  if (playing) { btn.classList.add('playing'); ico.innerHTML='<rect x="6" y="4" width="4" height="16"/><rect x="14" y="4" width="4" height="16"/>'; }
  else { btn.classList.remove('playing'); ico.innerHTML='<polygon points="5,3 19,12 5,21"/>'; }
}

function next() {
  if (!tracks.length) return;
  play(shuffle ? Math.floor(Math.random()*tracks.length) : (ci+1)%tracks.length);
}

function prev() {
  if (!tracks.length) return;
  if (aud.currentTime>3) { aud.currentTime=0; return; }
  play((ci-1+tracks.length)%tracks.length);
}

function toggleShuffle() { shuffle=!shuffle; document.getElementById('shuf').classList.toggle('on',shuffle); }
function toggleRepeat() { repeat=!repeat; document.getElementById('rep').classList.toggle('on',repeat); }

function seek(e) {
  if (ci===-1) return;
  const r=document.getElementById('pbar').getBoundingClientRect();
  aud.currentTime=Math.max(0,Math.min(1,(e.clientX-r.left)/r.width))*aud.duration;
}

function setVol(e) {
  const r=document.getElementById('vs').getBoundingClientRect();
  vol=Math.max(0,Math.min(1,(e.clientX-r.left)/r.width));
  aud.volume=vol; document.getElementById('vf').style.width=(vol*100)+'%';
  muted=false; updateVIcon();
}

function toggleMute() { muted=!muted; aud.muted=muted; updateVIcon(); }

function updateVIcon() {
  const v=document.getElementById('vico');
  if (muted||vol===0) v.innerHTML='<path d="M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4L9.91 6.09 12 8.18V4z"/>';
  else v.innerHTML='<path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/>';
}

aud.addEventListener('timeupdate', () => {
  if (!aud.duration) return;
  const p=(aud.currentTime/aud.duration)*100;
  document.getElementById('pfill').style.width=p+'%';
  document.getElementById('cur').textContent=fmt(aud.currentTime);
  document.getElementById('tot').textContent=fmt(aud.duration);
});

aud.addEventListener('loadedmetadata', () => {
  if (ci>=0) { tracks[ci].dur=fmt(aud.duration); render(); }
});

aud.addEventListener('ended', () => { if (repeat) { aud.currentTime=0; aud.play(); } else next(); });
aud.addEventListener('play', () => { playing=true; updateBtn(); });
aud.addEventListener('pause', () => { playing=false; updateBtn(); });

render();
</script>
</body>
</html>
